# v2ray遭遇封锁的解决方法
近日，很多用户发现自己的v2ray服务器被墙了，到底是什么原因呢？

此次被墙的大多数都是搭载v2ray服务器的内容，并通过nginx进行ws伪装，并进行443端口进行代理，运行过程当中非常的稳定，持续了很长一段时间，并且443端口本来就是一个正常的网站，谁也没有想到会被墙的问题。

事实上，很多用户都在使用tls+ws伪装，被墙的端口正是443和80，而其他端口使用过程当中却很正常。相关资料也证明，此次vps遭遇墙并不是偶然现象，主要问题如下:

大陆正在大规模地封锁基于TLS的翻墙服务器，使用需谨慎！

自从去年的10月3日，很多用户在网上表明自己至少有一台基于TLS的翻墙服务器被墙封锁，封锁服务器使用的协议包范围非常广泛，包括trojan、Xray、V2Ray TLS+Websocket、 VLESS和gRPC等，时至今日，并没有收到naiveproxy被封锁的问题和消息。解决办法就是交给专业人士去解决！搞个机场完事！比如下面几个

高端：nexitally 机场  独家优惠码: 888

性价比: 速鹰666机场  独家优惠码: 888

## 封锁消息的推测和深度分析

·此次封锁率先针对于翻墙服务的端口，用户在门口被封之后，很多人都会改换端口，从而导致整个服务器被封锁。而此次封锁主要基于端口和IP地址，与翻墙服务器有关的域名，并没有加入到本次行列当中，也没有被列为GFW和DNS黑名单序列当中。

·很多用户都报告自己的443端口被封禁，一些并没有使用443端口的用户也被封锁了，而大多数用户的服务器都属于流行的VPS服务商，很多用户的服务器都位于欧洲的家中，也遭到了封锁。

·在非全部案例当中，这种封锁采用动态的模式，即使遭遇了封锁，用户也可以通过浏览器直接访问翻墙端口，但是面对同一个端口，我们利用翻墙软件就无法直接连接。

通过以上内容总结可以得知，GFW这个功能已经越来越强大，甚至能够精准识别并封锁这些翻墙协议，并不是简简单单的封锁所有的443端口，或者只是封锁所有的流行机房，显然技术更加高超。

还没进行实证性的测量，可以推测出，此次封锁很可能与翻墙软件客户端使用过程当中发出的Clienthelo指纹命令有关。面对这种严峻的局势，开发者们可以考虑采用uTLS，可能会对大家有一定的帮助。

而此次封锁行为与TLS指纹有很大的关联，需要调查GFW是否真的使用了客户端发出的TLS指纹指令，从而识别这些协议内容。

如果大家在具体使用过程当中没有任何翻墙服务器被封锁，或者没有任何可以证实或我反驳以上内容的具体案例，我们可以互相交流一下，能够帮助大家快速找出一些问题的根源，快速解决问题。

网友们也因此给出了很多推测，怀疑GFW是不是已经具备了精准定位tls流量的功能，如果真的具备了这样的功能，此次封锁应该是非常全面的行为，特别针对于那些流量较大的vps，事实上，这件事情并不可能发生。

GFW也不会进行全盘封锁，而是采用一种模糊的封锁方式，基于tls大流量访问请求，就会触发被封锁的问题，如果一旦被封锁服务器，用户采用更换端口的方式，这样的行为会被再次检测到，那么网站就会被确认为代理服务，大大提高了被封的概率，这样就没有任何的解决方法了。

如果大家的IP地址被封禁，建议大家立即停止使用，千万不要更换端口，当过了这段敏感时期之后，就可能发生好转。

## 有什么好的解决方法呢？

·可以采用内网穿透的方法，非常有效，需要在vps端和客户端之间搭建一个虚拟局域网，也被大家称之为VPN，通过这个虚拟IP进行访问，能够大大降低被墙的概率。毕竟市面上主流的VPN都会采用udp端对端加密流量的方式，安全性能更高。

这样做的效果虽然很明显，但是也拥有一个致命的缺点，由于使用过程当中没有隐藏真实的IP地址，审查力度加大的时候，根本无法躲避封锁。

·将tls协议替换为utls，实际使用效果并不明显，还需要更多的用户进行使用和体验。

·在443端口前面加一层cdn，很多用户都会采用cloudflare，这种网站可以很好的保护和隐藏真实IP地址，采用通过公共IP访问网址，使用起来更加安全。

这种方法拥有很大的不足，需要通过公共IP来访问地址，访问速度和稳定性会大幅下降，但是只要不出现无法访问的问题，网速慢一点也无伤大雅。

xtls作为xray的主流加密方案，早就已经被GFW提前锁定，xray的xtls早就已经确认失效，具体使用过程当中根本无法避免被封锁的问题。当从这个角度出发的话，可以发现GFW识别tls流量可能真的不是一些明显的流量特征，如果是基于一些操作行为的识别，那就更加难以琢磨。这个消息对于高度依赖梯子的朋友们来说并不是一件好的事情，可能就无法轻松实现24小时挂梯子上网的服务了。

·当然我们也可以采用一个简单粗暴的方法，由于GFW并不会全年无休的如此认真，只需要避开敏感时期，在这段时间先不要翻墙，耐心等待一段时间，就会自动解封。

## Cloudflare CDN

### 注册Cloudflare账号

Cloudflare账号采用免费注册的方法，注册过程非常的简单，只需要输入email地址和密码就可以，希望大家注意的是，登录Cloudflare账号的密码，并不是输入的email，并不像国内网站那样需要填写各种各样的个人信息，涉及不到很多隐私问题，隐私保密性很强。

注册过程可以直接点击注册地址，具体的地址为:https://dash.cloudflare.com/sign-up。

新手小白第一次注册成功之后，页面就会跳转到让大家添加网站的界面当中，可以借助Cloudflare加速和保护大家的站点，

## Cloudflare套餐价格及内容

### ·Pro

采用按月计费的方式，每个月的价格为20美元，Cloudflare可以面向专业人员，能够有效保护其专业网站或者是博客的安全，同时也能够加快其专业网站或博客运行速度。

提供的核心功能有Free计划当中的全部功能、借助WAF(Web应用程序防火墙）增强安全性、缓存分析、自动移动优化和无损图像优化。

支持的资源包括，平均电子邮件响应时间，响应时间在四小时之内。

### ·Business

Cloudflare PCL合规套餐计划适用于在线运营的小型企业，可以为大家提供百分之百的运行时间SLA，各种高级安全选项，从而为用户提供优先客户支持服务。

核心功能主要包括，Pro计划当中的全部功能、使用自有的SSL证书、简易PCI合规性、CNAME设置兼容性、全年全天聊天支持和百分之百运行时间SLA。

支持的资源包括，平均电子邮件响应时间小于两小时。

### ·Enterprise

在购买这个套餐之前，需要大家填写联系，然后选择Free计划之后，可以享受到面向需要企业级安全性和性能优先的24/7/365电话，以及相应的电子邮件或者聊天支持，特别是用于那些迫切需要有保障运营时间的公司，可以带来很好的效果。

支持的核心功能有，Business计划当中的全部功能、基于角色的账户访问能力、25倍赔偿运行事件SLA、指定解决方案工程师支持、优先IP范围。

支持的资源包括，平均电子邮件响应时间小于一小时。

### ·Free(新手小白人物推荐使用该套餐）

每个月并不需要支付费，就可以拥有这款面向个人的Cloudflare，基于我们的全球网络开发，适用于从事非业务关进行个人或者是业余项目的用户。

核心功能主要包括，全球内容分发网络、通过社区和开发人员文档提供支持和DDoS攻击缓解。

使用过程当中，系统会自动检测大家填写的域名，是否已经拥有了DNS解析。

通常情况下需要大家去域名，对现有的注册商管理界面进行修改，将dna server更改为Cloudflare下面指定的两个dna server。

当我们将域名服务商按照以上操作步骤完成之后，千万不要忘记点击右下角的“Done”，从而完成此操作。

完成之后还需要等待一段时间之后才能够生效，但是这个时间并不会很长。

操作过程当中很多用户都会启用tls，表明大家的福气已经有了属于自己的证书，也就不需要使用Cloudflare所提供的证书内容了。

为了能够更好的进行操作，还需要大家点击“SSL/TLS”选项，将其修改成为完全。

在等待DNS生效的这段时间里，自己的域名解析目标IP，已经并不是自己的服务器，而是更改成为了cdn提供的服务器，这个方面还需要大家有所了解？
